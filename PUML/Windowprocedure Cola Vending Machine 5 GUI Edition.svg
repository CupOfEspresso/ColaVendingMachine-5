<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="943px" preserveAspectRatio="none" style="width:4164px;height:943px;" version="1.1" viewBox="0 0 4164 943" width="4164px" zoomAndPan="magnify"><defs><filter height="300%" id="fbdfoqn2330n0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="490" x="1841" y="16.708">Windowprocedure Cola Vending Machine 5 GUI Edition</text><ellipse cx="3147.5" cy="38.9531" fill="#000000" filter="url(#fbdfoqn2330n0)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="189.9531" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="350" x="2972.5" y="125.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2972.5" x2="3322.5" y1="152.25" y2="152.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="3116" y="143.9482">Initialised</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="2977.5" y="168.3887">sim_t simulation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="2977.5" y="182.3574">*pSim = &amp;simulation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="294" x="2977.5" y="196.3262">pSim-&gt;moneyInWallet = (rand() % 5000 + 500)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="281" x="2977.5" y="210.2949">pSim-&gt;moneyInAccount = (rand() % 100000)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="219" x="2977.5" y="224.2637">pSim-&gt;changeInMachine = change</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="174" x="2977.5" y="238.2324">pSim-&gt;moneyInMachine = 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="2977.5" y="252.2012">pSim-&gt;isDebitCardEntered = 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="2977.5" y="266.1699">pSim-&gt;postionInCardCode = 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="2977.5" y="280.1387">pSim-&gt;hasPaid = 0</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="245" x="2977.5" y="294.1074">pSim-&gt;debitCardCode[4] = {0, 0, 0, 0}</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="330" x="2977.5" y="308.0762">pSim-&gt;POINTOFCONCEPTPASSWORD[4] = {1, 3, 3, 7}</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="3074.5" y="376.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3074.5" x2="3220.5" y1="403.25" y2="403.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="3084.5" y="394.9482">Windowprocedure</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1730" y="487.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1730" x2="1857" y1="514.25" y2="514.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1740" y="505.9482">WM_COMMAND</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="3774.5" y="487.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3774.5" x2="3894.5" y1="514.25" y2="514.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="3784.5" y="505.9482">WM_DESTROY</text><ellipse cx="3834.5" cy="646.9531" fill="none" filter="url(#fbdfoqn2330n0)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="3835" cy="647.4531" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="297" x="674" y="614.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="674" x2="971" y1="641.25" y2="641.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="721.5" y="632.9482">CM_COIN_BUTTON_PRESSED</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="277" x="679" y="657.3887">pSim-&gt;moneyInMachine = appropriate value</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="277" x="679" y="671.3574">pSim-&gt;moneyInMachine = appropriate value</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="231" x="3498" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3498" x2="3729" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="211" x="3508" y="639.9482">CM_DRINK_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="3564.5" y="755.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3564.5" x2="3716.5" y1="782.25" y2="782.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="3574.5" y="773.9482">UserDrinkSelection</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="3732" y="882.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3732" x2="3861" y1="909.25" y2="909.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="3742" y="900.9482">Dispense_Drink</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="247" x="2658" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2658" x2="2905" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="2668" y="639.9482">CM_CHANGE_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="270" x="103.5" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="103.5" x2="373.5" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="250" x="113.5" y="639.9482">CM_DEBITCARD_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="6" y="755.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="135" y1="782.25" y2="782.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="16" y="773.9482">Enter_debitcard</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="2412.5" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2412.5" x2="2622.5" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="190" x="2422.5" y="639.9482">CM_PIN_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="2525.5" y="755.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2525.5" x2="2649.5" y1="782.25" y2="782.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="2535.5" y="773.9482">Store_In_Buffer</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="2140" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2140" x2="2377" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="217" x="2150" y="639.9482">CM_PIN_BUTTON_PRESSED_OK</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="1006.5" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1006.5" x2="1250.5" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="224" x="1016.5" y="639.9482">CM_PIN_BUTTON_PRESSED_DEL</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="1396.5" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1396.5" x2="1578.5" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="1406.5" y="639.9482">CM_MENU_ITEM_ADMIN</text><rect fill="#FEFECE" filter="url(#fbdfoqn2330n0)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="1908.5" y="621.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1908.5" x2="2104.5" y1="648.25" y2="648.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="1918.5" y="639.9482">CM_MENU_ITEM_AUTHOR</text><path d="M3358,200.9531 L3358,216.9531 L3322.55,220.9531 L3358,224.9531 L3358,241.2188 A0,0 0 0 0 3358,241.2188 L3831,241.2188 A0,0 0 0 0 3831,241.2188 L3831,210.9531 L3821,200.9531 L3358,200.9531 A0,0 0 0 0 3358,200.9531 " fill="#00FF00" filter="url(#fbdfoqn2330n0)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3821,200.9531 L3821,210.9531 L3831,210.9531 L3821,200.9531 " fill="#00FF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="452" x="3364" y="218.02">initializing sim_t a struct that contents much of the system infomation,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="3364" y="233.1528">and wil be accessed using pSim.</text><path d="M219,381.9531 L219,422.2188 A0,0 0 0 0 219,422.2188 L552,422.2188 A0,0 0 0 0 552,422.2188 L552,419.8581 L1729.75,507.0181 L552,411.8581 L552,391.9531 L542,381.9531 L219,381.9531 A0,0 0 0 0 219,381.9531 " fill="#00FF00" filter="url(#fbdfoqn2330n0)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M542,381.9531 L542,391.9531 L552,391.9531 L542,381.9531 " fill="#00FF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="225" y="399.02">Because windows api use a lot of WM_COMMAND</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="225" y="414.1528">I have simplified it to the base Commands.</text><!--MD5=[15100040611c31b72131a29c9f968092]
link *start to Initialised--><path d="M3147.5,49.1271 C3147.5,63.0781 3147.5,91.1281 3147.5,120.5341 " fill="none" id="*start-&gt;Initialised" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3147.5,125.6491,3151.5,116.6491,3147.5,120.6491,3143.5,116.6491,3147.5,125.6491" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="607" x="3148.5" y="92.02">Wm_CREATE, WM_PAINT, WM_CTLCOLORSTATIC / INIT_Button(), INIT_Static, INIT_Menu, INIT_Edit</text><!--MD5=[0625038f32a7b3210c66ae36506ef526]
link Initialised to Windowprocedure--><path d="M3147.5,316.1711 C3147.5,336.4511 3147.5,356.4071 3147.5,371.8581 " fill="none" id="Initialised-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3147.5,376.9201,3151.5,367.9201,3147.5,371.9201,3143.5,367.9201,3147.5,376.9201" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ba9dcebf0fce5fb461d80c458d4c0fe1]
link Windowprocedure to WM_COMMAND--><path d="M3074.22,408.8521 C2837.16,427.9361 2093.07,487.8371 1862.39,506.4071 " fill="none" id="Windowprocedure-&gt;WM_COMMAND" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1857.37,506.8121,1866.6611,510.0794,1862.354,506.4121,1866.0212,502.105,1857.37,506.8121" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f2d4784befc56ba9bfe993061e9f8978]
link Windowprocedure to WM_DESTROY--><path d="M3220.54,407.3361 C3316.61,413.9391 3490.36,428.7771 3636.5,456.9531 C3681.43,465.6151 3731.03,479.4001 3769.35,491.0031 " fill="none" id="Windowprocedure-&gt;WM_DESTROY" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3774.44,492.5521,3766.9783,486.1239,3769.653,491.1084,3764.6684,493.7831,3774.44,492.5521" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2e10ad9fe24365b1d1745ec2e8a5a865]
link WM_DESTROY to *end--><path d="M3834.5,538.1641 C3834.5,565.4721 3834.5,608.9951 3834.5,631.4691 " fill="none" id="WM_DESTROY-&gt;*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3834.5,636.7071,3838.5,627.7071,3834.5,631.7071,3830.5,627.7071,3834.5,636.7071" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[393748681b8e83416bbd3a46186dfa6c]
link WM_COMMAND to CM_COIN_BUTTON_PRESSED--><path d="M1729.71,514.6271 C1561.74,516.9561 1110.38,526.9581 967.5,567.9531 C933.856,577.6061 899.222,595.8701 872.244,612.2991 " fill="none" id="WM_COMMAND-&gt;CM_COIN_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="867.981,614.9181,877.7433,613.6152,872.2413,612.3008,873.5556,606.7988,867.981,614.9181" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="968.5" y="581.02">CHP_CheckCoins()</text><!--MD5=[a25c9094d86aa612bab1decadf61bbcc]
link WM_COMMAND to CM_DRINK_BUTTON_PRESSED--><path d="M1857.11,514.9621 C2110.13,519.1791 3037.72,536.6491 3165.5,567.9531 C3182.69,572.1631 3184.57,579.8241 3201.5,584.9531 C3296.98,613.8711 3409.21,629.3371 3492.41,637.4511 " fill="none" id="WM_COMMAND-&gt;CM_DRINK_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3497.85,637.9741,3489.2811,633.1189,3492.8736,637.4885,3488.504,641.0811,3497.85,637.9741" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="3202.5" y="581.02">CHP_CheckIfEnough()</text><!--MD5=[03e0623e0b0b1f2fbf115a0253077c07]
link CM_DRINK_BUTTON_PRESSED to UserDrinkSelection--><path d="M3618.45,672.1641 C3622.98,694.3061 3629.69,727.1091 3634.52,750.7081 " fill="none" id="CM_DRINK_BUTTON_PRESSED-&gt;UserDrinkSelection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3635.58,755.8961,3637.6942,746.2769,3634.5775,750.9977,3629.8567,747.8809,3635.58,755.8961" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="3630.5" y="722.02">If you could pay it / WTSB_Redraw()</text><!--MD5=[0416babe433228265700962224c5e7cd]
link UserDrinkSelection to Dispense_Drink--><path d="M3635.57,806.2721 C3633.96,821.1601 3634.66,839.8107 3644.5,852.9531 C3663.86,878.8034 3696.63,892.3219 3726.79,899.3732 " fill="none" id="UserDrinkSelection-&gt;Dispense_Drink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3732,900.5332,3724.0998,894.6522,3727.1224,899.4338,3722.3407,902.4564,3732,900.5332" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="3645.5" y="849.02">Deposites left over money in change buffer</text><!--MD5=[5d454264d86af940c17d7d4c48964e54]
link Dispense_Drink to Windowprocedure--><path d="M3861.31,892.0976 C3884.28,883.9404 3908.6,871.5535 3925.5,852.9531 C3947.71,828.5001 3947.5,814.9891 3947.5,781.9531 C3947.5,511.9531 3947.5,511.9531 3947.5,511.9531 C3947.5,439.6171 3427.37,413.0661 3225.9,405.4951 " fill="none" id="Dispense_Drink-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3220.62,405.2981,3229.4652,409.6297,3225.6165,405.4839,3229.7624,401.6352,3220.62,405.2981" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="3948.5" y="651.52">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[540ac7ce821b50f81f5376fa4bbc6752]
link CM_DRINK_BUTTON_PRESSED to Windowprocedure--><path d="M3611.31,621.7401 C3608.77,605.2041 3603.3,583.5481 3591.5,567.9531 C3534.56,492.7041 3498.26,491.6321 3410.5,456.9531 C3350.76,433.3481 3279.13,419.5081 3225.72,411.7611 " fill="none" id="CM_DRINK_BUTTON_PRESSED-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3220.61,411.0301,3228.9613,416.2509,3225.5607,411.7302,3230.0814,408.3297,3220.61,411.0301" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="3567.5" y="517.52">If you couldn't pay it</text><!--MD5=[3d64d410bba2eaba769c416cbf3f2b70]
link WM_COMMAND to CM_CHANGE_BUTTON_PRESSED--><path d="M1857.14,514.4981 C2027.53,516.5161 2491.11,525.8321 2637.5,567.9531 C2675.63,578.9231 2714.97,601.1071 2742.88,619.0221 " fill="none" id="WM_COMMAND-&gt;CM_CHANGE_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2747.26,621.8581,2741.8748,613.612,2743.0615,619.1429,2737.5305,620.3296,2747.26,621.8581" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="2680.5" y="581.02">CHP_ChangeHandeling</text><!--MD5=[7657591e8ae1590f2bc158b10d37e56e]
link CM_CHANGE_BUTTON_PRESSED to Windowprocedure--><path d="M2803.73,621.8621 C2813.86,610.7421 2825.92,597.2961 2836.5,584.9531 C2872.68,542.7371 2870.22,520.2251 2915.5,487.9531 C2961.68,455.0351 3022.04,433.4471 3069.62,420.2661 " fill="none" id="CM_CHANGE_BUTTON_PRESSED-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3074.47,418.9381,3064.735,417.4452,3069.6459,420.2527,3066.8383,425.1637,3074.47,418.9381" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="2916.5" y="517.52">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[a9c6c7f208f70d41025b11584a9c3bf2]
link WM_COMMAND to CM_DEBITCARD_BUTTON_PRESSED--><path d="M1729.73,514.6341 C1564.72,516.9541 1110.34,526.8801 734.5,567.9531 C689.249,572.8981 678.439,577.7011 633.5,584.9531 C549.04,598.5821 454.314,613.2321 378.8,624.7591 " fill="none" id="WM_COMMAND-&gt;CM_DEBITCARD_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="373.854,625.5131,383.3544,628.1097,378.7968,624.7589,382.1476,620.2012,373.854,625.5131" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="735.5" y="581.02">PWDC_DebitcardHandeling()</text><!--MD5=[0c56e3912ec96814b3af0cf1d957f77c]
link CM_DEBITCARD_BUTTON_PRESSED to Enter_debitcard--><path d="M240.539,672.0721 C240.652,688.9931 237.975,711.1521 225.5,725.9531 C204.232,751.1851 170.488,764.6391 139.907,771.8081 " fill="none" id="CM_DEBITCARD_BUTTON_PRESSED-&gt;Enter_debitcard" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="135.029,772.9051,144.6875,774.8324,139.9071,771.8078,142.9317,767.0274,135.029,772.9051" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="236.5" y="722.02">First time enters card</text><!--MD5=[0c56e3912ec96814b3af0cf1d957f77c]
link CM_DEBITCARD_BUTTON_PRESSED to Enter_debitcard--><path d="M108.792,672.1481 C91.0137,680.9211 74.9601,692.8221 63.5,708.9531 C55.0027,720.9141 55.8676,737.0071 59.2501,750.8471 " fill="none" id="CM_DEBITCARD_BUTTON_PRESSED-&gt;Enter_debitcard-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="60.5975,755.8331,62.1112,746.1013,59.2932,751.0062,54.3882,748.1882,60.5975,755.8331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="64.5" y="722.02">Second time takes card</text><!--MD5=[7710365ef1517d2e2c42d799b66522c0]
link Enter_debitcard to Windowprocedure--><path d="M58.8986,755.7871 C55.1099,746.6581 51.3918,736.0371 49.5,725.9531 C39.9373,674.9791 49.8519,652.6221 85.5,614.9531 C221.884,470.8361 316.954,515.1551 513.5,487.9531 C1025.93,417.0331 2688.32,405.0811 3069.24,403.2581 " fill="none" id="Enter_debitcard-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3074.48,403.2331,3065.4573,399.2846,3069.4801,403.2617,3065.503,407.2845,3074.48,403.2331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="135.5" y="581.02">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[c108a44932b4a9056a8c76685e83bbc6]
link WM_COMMAND to CM_PIN_BUTTON_PRESSED--><path d="M1857.1,514.2061 C1997.5,515.5841 2329.58,523.5881 2431.5,567.9531 C2456.59,578.8731 2479.25,600.1411 2495,617.7131 " fill="none" id="WM_COMMAND-&gt;CM_PIN_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2498.46,621.6311,2495.4982,612.2382,2495.1493,617.8842,2489.5032,617.5353,2498.46,621.6311" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="2460.5" y="581.02">PWDC_AddPincodeBuffer()</text><!--MD5=[e9734c3841956494bd8f1a3bf25492ff]
link CM_PIN_BUTTON_PRESSED to Store_In_Buffer--><path d="M2607.93,671.9581 C2618.86,674.5011 2629.91,676.9021 2640.5,678.9531 C2688.94,688.3301 2828.05,671.7811 2860.5,708.9531 C2865.47,714.6451 2865.3,720.1151 2860.5,725.9531 C2834.97,757.0321 2727.16,770.5261 2654.9,776.1631 " fill="none" id="CM_PIN_BUTTON_PRESSED-&gt;Store_In_Buffer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2649.77,776.5561,2659.0423,779.8764,2654.7562,776.1847,2658.448,771.8985,2649.77,776.5561" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cb746be6f751df5da082158bef504a3f]
link Store_In_Buffer to Windowprocedure--><path d="M2649.64,774.3101 C2725.83,766.4581 2849.62,750.3871 2888.5,725.9531 C2910.33,712.2361 2911.5,702.2691 2922.5,678.9531 C2944.26,632.8401 2913.95,602.4471 2951.5,567.9531 C3009.29,514.8661 3070.27,593.6971 3125.5,537.9531 C3152.83,510.3671 3154.22,462.9331 3151.66,432.2681 " fill="none" id="Store_In_Buffer-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3151.18,427.1211,3148.0317,436.4532,3151.6436,432.0996,3155.9973,435.7115,3151.18,427.1211" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="2952.5" y="581.02">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[cb746be6f751df5da082158bef504a3f]
link Store_In_Buffer to Windowprocedure--><path d="M2649.64,773.9611 C2815.76,756.4911 3263.1,699.4481 3345.5,584.9531 C3391.8,520.6141 3289.61,461.5681 3215.52,429.0901 " fill="none" id="Store_In_Buffer-&gt;Windowprocedure-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3210.68,426.9891,3217.3495,434.2361,3215.2683,428.976,3220.5284,426.8948,3210.68,426.9891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="3355.5" y="581.02">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[cb746be6f751df5da082158bef504a3f]
link Store_In_Buffer to Windowprocedure--><path d="M2525.16,779.4071 C2236.17,776.4611 1025.27,759.4541 656.5,678.9531 C350.81,612.2221 393.733,595.3641 419.5,567.9531 C512.769,468.7341 2633.09,414.7661 3069.42,404.6901 " fill="none" id="Store_In_Buffer-&gt;Windowprocedure-2" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3074.48,404.5731,3065.3909,400.7799,3069.4813,404.6874,3065.5738,408.7778,3074.48,404.5731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="420.5" y="581.02">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[0589d69c9fb082447a8af7a6cf9cf96d]
link WM_COMMAND to CM_PIN_BUTTON_PRESSED_OK--><path d="M1857.04,515.8331 C1958.25,519.8751 2150.49,532.1531 2207.5,567.9531 C2225.66,579.3571 2238.69,599.8601 2247.03,616.9841 " fill="none" id="WM_COMMAND-&gt;CM_PIN_BUTTON_PRESSED_OK" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2249.26,621.7131,2249.0465,611.8666,2247.1307,617.1892,2241.8082,615.2734,2249.26,621.7131" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="2227.5" y="581.02">PWDC_RemovePincodeBuffer()</text><!--MD5=[8a22965d86931cec4e75aefe0c02affd]
link CM_PIN_BUTTON_PRESSED_OK to Store_In_Buffer--><path d="M2260.8,671.9981 C2263.8,689.5691 2270.68,712.5771 2286.5,725.9531 C2321.02,755.1331 2442.76,769.3851 2520.44,775.6581 " fill="none" id="CM_PIN_BUTTON_PRESSED_OK-&gt;Store_In_Buffer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2525.49,776.0601,2516.8388,771.353,2520.506,775.6601,2516.1989,779.3274,2525.49,776.0601" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="564" x="2287.5" y="722.02">Check storebuffer against database or in this case pSim-&gt;POINTOFCONCEPTPASSWORD</text><!--MD5=[8a22965d86931cec4e75aefe0c02affd]
link CM_PIN_BUTTON_PRESSED_OK to Store_In_Buffer--><path d="M2151.37,672.0191 C2100.38,684.5521 2048.86,699.2441 2041.5,708.9531 C2036.94,714.9751 2036.43,720.3541 2041.5,725.9531 C2073.09,760.8231 2381.17,774.0341 2520.12,778.2481 " fill="none" id="CM_PIN_BUTTON_PRESSED_OK-&gt;Store_In_Buffer-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2525.4,778.4061,2516.518,774.1506,2520.402,778.2632,2516.2894,782.1473,2525.4,778.4061" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="2042.5" y="722.02">Remove one digit form store buffer</text><!--MD5=[a8a03847daf8dc3ae42f27a414570248]
link WM_COMMAND to CM_PIN_BUTTON_PRESSED_DEL--><path d="M1729.74,514.1131 C1566.56,515.1821 1143.67,522.3681 1101.5,567.9531 C1088.96,581.5111 1095.89,601.1871 1105.86,617.3851 " fill="none" id="WM_COMMAND-&gt;CM_PIN_BUTTON_PRESSED_DEL" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1108.74,621.8541,1107.2389,612.1203,1106.0366,617.648,1100.509,616.4457,1108.74,621.8541" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1102.5" y="581.02">PWDC_CheckPincode()</text><!--MD5=[2d2dac9fa1b4c055c0f274d6e28e10b0]
link WM_COMMAND to CM_MENU_ITEM_ADMIN--><path d="M1729.83,515.7781 C1648.68,519.6001 1515.2,531.4211 1484.5,567.9531 C1473.36,581.2101 1474.09,600.6661 1477.61,616.8301 " fill="none" id="WM_COMMAND-&gt;CM_MENU_ITEM_ADMIN" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1478.79,621.7301,1480.5819,612.0456,1477.6245,616.8679,1472.8023,613.9105,1478.79,621.7301" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="1485.5" y="581.02">Grant admin right and gain debug money</text><!--MD5=[bb25d6ed9e70287a2d73e5490d40f753]
link CM_MENU_ITEM_ADMIN to WM_COMMAND--><path d="M1578.54,643.5921 C1634.19,637.9711 1704.12,622.9791 1754.5,584.9531 C1768.32,574.5251 1777.86,557.7111 1784.05,543.0631 " fill="none" id="CM_MENU_ITEM_ADMIN-&gt;WM_COMMAND" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1786.02,538.1911,1778.94,545.0375,1784.1471,542.8271,1786.3575,548.0342,1786.02,538.1911" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1771.5" y="581.02">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[bb25d6ed9e70287a2d73e5490d40f753]
link CM_MENU_ITEM_ADMIN to WM_COMMAND--><path d="M1396.49,641.7711 C1316.65,634.8621 1219.61,616.5411 1263.5,567.9531 C1293.88,534.3251 1588.36,520.5371 1724.77,515.9211 " fill="none" id="CM_MENU_ITEM_ADMIN-&gt;WM_COMMAND-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1729.95,515.7471,1720.8288,512.0319,1724.9525,515.9042,1721.0801,520.0279,1729.95,515.7471" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1264.5" y="581.02">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[6ab05012e162414f039dd4f921027586]
link WM_COMMAND to CM_MENU_ITEM_AUTHOR--><path d="M1857.16,522.3891 C1910.98,530.9261 1982.16,546.0101 2000.5,567.9531 C2011.53,581.1541 2013.12,600.3901 2011.9,616.4561 " fill="none" id="WM_COMMAND-&gt;CM_MENU_ITEM_AUTHOR" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2011.39,621.7691,2016.234,613.1938,2011.8691,616.7921,2008.2708,612.4273,2011.39,621.7691" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="2010.5" y="581.02">Displaying system infomation</text><!--MD5=[a79ff640d507c0a81b75f7cea1d81f48]
@startuml


title Windowprocedure Cola Vending Machine 5 GUI Edition

[*] - -> Initialised : Wm_CREATE, WM_PAINT, WM_CTLCOLORSTATIC / INIT_Button(), INIT_Static, INIT_Menu, INIT_Edit

Initialised : sim_t simulation
Initialised : ~*pSim = &simulation
Initialised : pSim->moneyInWallet = (rand() % 5000 + 500)
Initialised : pSim->moneyInAccount = (rand() % 100000)	
Initialised : pSim->changeInMachine = change				
Initialised : pSim->moneyInMachine = 0					
Initialised : pSim->isDebitCardEntered = 0					
Initialised : pSim->postionInCardCode = 0					
Initialised : pSim->hasPaid = 0                   
Initialised : pSim->debitCardCode[4] = {0, 0, 0, 0}        
Initialised : pSim->POINTOFCONCEPTPASSWORD[4] = {1, 3, 3, 7}         
Initialised - -> Windowprocedure

Windowprocedure - -> WM_COMMAND
Windowprocedure - -> WM_DESTROY

WM_DESTROY - -> [*]

WM_COMMAND - -> CM_COIN_BUTTON_PRESSED : CHP_CheckCoins()
CM_COIN_BUTTON_PRESSED : pSim->moneyInMachine = appropriate value
CM_COIN_BUTTON_PRESSED : pSim->moneyInMachine = appropriate value

WM_COMMAND - -> CM_DRINK_BUTTON_PRESSED : CHP_CheckIfEnough()
CM_DRINK_BUTTON_PRESSED - -> UserDrinkSelection : If you could pay it / WTSB_Redraw()
UserDrinkSelection - -> Dispense_Drink : Deposites left over money in change buffer
Dispense_Drink - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

CM_DRINK_BUTTON_PRESSED - -> Windowprocedure : If you couldn't pay it 

WM_COMMAND - -> CM_CHANGE_BUTTON_PRESSED : CHP_ChangeHandeling
CM_CHANGE_BUTTON_PRESSED - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_DEBITCARD_BUTTON_PRESSED : PWDC_DebitcardHandeling()
CM_DEBITCARD_BUTTON_PRESSED - -> Enter_debitcard : First time enters card
CM_DEBITCARD_BUTTON_PRESSED - -> Enter_debitcard : Second time takes card
Enter_debitcard - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_PIN_BUTTON_PRESSED : PWDC_AddPincodeBuffer()
CM_PIN_BUTTON_PRESSED - -> Store_In_Buffer
Store_In_Buffer - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_PIN_BUTTON_PRESSED_OK : PWDC_RemovePincodeBuffer()
CM_PIN_BUTTON_PRESSED_OK - -> Store_In_Buffer : Check storebuffer against database or in this case pSim->POINTOFCONCEPTPASSWORD
Store_In_Buffer - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_PIN_BUTTON_PRESSED_DEL : PWDC_CheckPincode()
CM_PIN_BUTTON_PRESSED_OK - -> Store_In_Buffer : Remove one digit form store buffer
Store_In_Buffer - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_MENU_ITEM_ADMIN : Grant admin right and gain debug money
CM_MENU_ITEM_ADMIN - -> WM_COMMAND : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_MENU_ITEM_AUTHOR : Displaying system infomation
CM_MENU_ITEM_ADMIN - -> WM_COMMAND : WTDB_Debug()/ WTDB_Display()

note right of Initialised #lime
    initializing sim_t a struct that contents much of the system infomation,
    and wil be accessed using pSim.
end note

note top of WM_COMMAND #lime
    Because windows api use a lot of WM_COMMAND
    I have simplified it to the base Commands.
end note
@enduml

PlantUML version 1.2020.00(Sat Jan 11 12:30:53 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>