<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="94.3px" preserveAspectRatio="none" style="width:382px;height:94px;" version="1.1" viewBox="0 0 382 94" width="382.4px" zoomAndPan="magnify"><defs><filter height="300%" id="fr0mo82ypvd6e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="0.2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="0.4" dy="0.4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="1.8" lengthAdjust="spacingAndGlyphs" textLength="49" x="167" y="1.6708">Windowprocedure Cola Vending Machine 5 GUI Edition</text><ellipse cx="92.8581" cy="3.8953" fill="#000000" filter="url(#fr0mo82ypvd6e)" rx="1" ry="1" style="stroke: none; stroke-width: 0.1;"/><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="18.9953" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="35" x="75.3581" y="12.5953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="75.3581" x2="110.3581" y1="15.225" y2="15.225"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="6.3" x="89.7081" y="14.3948">Initialised</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="10" x="75.8581" y="16.8389">sim_t simulation</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="12.8" x="75.8581" y="18.2357">*pSim = &amp;simulation</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="29.4" x="75.8581" y="19.6326">pSim-&gt;moneyInWallet = (rand() % 5000 + 500)</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="28.1" x="75.8581" y="21.0295">pSim-&gt;moneyInAccount = (rand() % 100000)</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="21.9" x="75.8581" y="22.4264">pSim-&gt;changeInMachine = change</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="17.4" x="75.8581" y="23.8232">pSim-&gt;moneyInMachine = 0</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="75.8581" y="25.2201">pSim-&gt;isDebitCardEntered = 0</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="18.9" x="75.8581" y="26.617">pSim-&gt;postionInCardCode = 0</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="12" x="75.8581" y="28.0139">pSim-&gt;hasPaid = 0</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="24.5" x="75.8581" y="29.4107">pSim-&gt;debitCardCode[4] = {0, 0, 0, 0}</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="33" x="75.8581" y="30.8076">pSim-&gt;POINTOFCONCEPTPASSWORD[4] = {1, 3, 3, 7}</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="14.6" x="85.5581" y="37.6953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="85.5581" x2="100.1581" y1="40.325" y2="40.325"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="12.6" x="86.5581" y="39.4948">Windowprocedure</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="12.7" x="187.508" y="48.7953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="187.508" x2="200.208" y1="51.425" y2="51.425"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="10.7" x="188.508" y="50.5948">WM_COMMAND</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="12" x="17.4581" y="48.7953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="17.4581" x2="29.4581" y1="51.425" y2="51.425"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="10" x="18.4581" y="50.5948">WM_DESTROY</text><ellipse cx="28.4581" cy="64.6953" fill="none" filter="url(#fr0mo82ypvd6e)" rx="1" ry="1" style="stroke: #000000; stroke-width: 0.1;"/><ellipse cx="28.5081" cy="64.7453" fill="#000000" rx="0.6" ry="0.6" style="stroke: none; stroke-width: 0.1;"/><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="6.4234" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="29.7" x="86.8081" y="61.4953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="86.8081" x2="116.5081" y1="64.125" y2="64.125"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="20.2" x="91.5581" y="63.2948">CM_COIN_BUTTON_PRESSED</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="27.7" x="87.3081" y="65.7389">pSim-&gt;moneyInMachine = appropriate value</text><text fill="#000000" font-family="sans-serif" font-size="1.2" lengthAdjust="spacingAndGlyphs" textLength="27.7" x="87.3081" y="67.1357">pSim-&gt;moneyInMachine = appropriate value</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="23.1" x="46.1081" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="46.1081" x2="69.2081" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="21.1" x="47.1081" y="63.9948">CM_DRINK_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="15.2" x="53.9581" y="75.5953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="53.9581" x2="69.1581" y1="78.225" y2="78.225"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="13.2" x="54.9581" y="77.3948">UserDrinkSelection</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="12.9" x="271.808" y="88.2953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="271.808" x2="284.708" y1="90.925" y2="90.925"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="10.9" x="272.808" y="90.0948">Dispense_Drink</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="24.7" x="120.008" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="120.008" x2="144.708" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="22.7" x="121.008" y="63.9948">CM_CHANGE_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="27" x="258.858" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="258.858" x2="285.858" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="25" x="259.858" y="63.9948">CM_DEBITCARD_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="12.9" x="283.808" y="75.5953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="283.808" x2="296.708" y1="78.225" y2="78.225"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="10.9" x="284.808" y="77.3948">Enter_debitcard</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="21" x="148.258" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="148.258" x2="169.258" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="19" x="149.258" y="63.9948">CM_PIN_BUTTON_PRESSED</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="12.4" x="82.1581" y="75.5953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="82.1581" x2="94.5581" y1="78.225" y2="78.225"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="10.4" x="83.1581" y="77.3948">Store_In_Buffer</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="23.7" x="172.808" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="172.808" x2="196.508" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="21.7" x="173.808" y="63.9948">CM_PIN_BUTTON_PRESSED_OK</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="24.4" x="200.058" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="200.058" x2="224.458" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="22.4" x="201.058" y="63.9948">CM_PIN_BUTTON_PRESSED_DEL</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="18.2" x="227.958" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="227.958" x2="246.158" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="16.2" x="228.958" y="63.9948">CM_MENU_ITEM_ADMIN</text><rect fill="#FEFECE" filter="url(#fr0mo82ypvd6e)" height="5" rx="1.25" ry="1.25" style="stroke: #A80036; stroke-width: 0.15000000000000002;" width="19.6" x="293.958" y="62.1953"/><line style="stroke: #A80036; stroke-width: 0.15000000000000002;" x1="293.958" x2="313.558" y1="64.825" y2="64.825"/><text fill="#000000" font-family="sans-serif" font-size="1.4" lengthAdjust="spacingAndGlyphs" textLength="17.6" x="294.958" y="63.9948">CM_MENU_ITEM_AUTHOR</text><path d="M113.908,20.0953 L113.908,21.6953 L110.363,22.0953 L113.908,22.4953 L113.908,24.1219 A0,0 0 0 0 113.908,24.1219 L161.208,24.1219 A0,0 0 0 0 161.208,24.1219 L161.208,21.0953 L160.208,20.0953 L113.908,20.0953 A0,0 0 0 0 113.908,20.0953 " fill="#00FF00" filter="url(#fr0mo82ypvd6e)" style="stroke: #A80036; stroke-width: 0.1;"/><path d="M160.208,20.0953 L160.208,21.0953 L161.208,21.0953 L160.208,20.0953 " fill="#00FF00" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="45.2" x="114.508" y="21.802">initializing sim_t a struct that contents much of the system infomation,</text><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.6" x="114.508" y="23.3153">and wil be accessed using pSim.</text><path d="M347.908,38.1953 L347.908,40.9603 L200.236,50.788 L347.908,41.7603 L347.908,42.2219 A0,0 0 0 0 347.908,42.2219 L381.208,42.2219 A0,0 0 0 0 381.208,42.2219 L381.208,39.1953 L380.208,38.1953 L347.908,38.1953 A0,0 0 0 0 347.908,38.1953 " fill="#00FF00" filter="url(#fr0mo82ypvd6e)" style="stroke: #A80036; stroke-width: 0.1;"/><path d="M380.208,38.1953 L380.208,39.1953 L381.208,39.1953 L380.208,38.1953 " fill="#00FF00" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="348.508" y="39.902">Because windows api use a lot of WM_COMMAND</text><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="27.3" x="348.508" y="41.4153">I have simplified it to the base Commands.</text><!--MD5=[15100040611c31b72131a29c9f968092]
link *start to Initialised--><path d="M92.8581,4.9127 C92.8581,6.3078 92.8581,9.1128 92.8581,12.0534 " fill="none" id="*start-&gt;Initialised" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="92.8581,12.5649,93.2581,11.6649,92.8581,12.0649,92.4581,11.6649,92.8581,12.5649" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="60.7" x="92.9581" y="9.202">Wm_CREATE, WM_PAINT, WM_CTLCOLORSTATIC / INIT_Button(), INIT_Static, INIT_Menu, INIT_Edit</text><!--MD5=[0625038f32a7b3210c66ae36506ef526]
link Initialised to Windowprocedure--><path d="M92.8581,31.6171 C92.8581,33.6451 92.8581,35.6407 92.8581,37.1858 " fill="none" id="Initialised-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="92.8581,37.692,93.2581,36.792,92.8581,37.192,92.4581,36.792,92.8581,37.692" style="stroke: #A80036; stroke-width: 0.1;"/><!--MD5=[ba9dcebf0fce5fb461d80c458d4c0fe1]
link Windowprocedure to WM_COMMAND--><path d="M100.1624,41.0836 C118.939,43.1099 168.693,48.4795 186.985,50.4536 " fill="none" id="Windowprocedure-&gt;WM_COMMAND" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="187.491,50.5081,186.6383,50.0152,186.9938,50.4552,186.5537,50.8107,187.491,50.5081" style="stroke: #A80036; stroke-width: 0.1;"/><!--MD5=[f2d4784befc56ba9bfe993061e9f8978]
link Windowprocedure to WM_DESTROY--><path d="M85.5315,40.5162 C71.6102,41.0066 41.8604,42.4127 32.1581,45.6953 C30.3014,46.3235 28.4386,47.423 26.9158,48.4747 " fill="none" id="Windowprocedure-&gt;WM_DESTROY" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="26.4956,48.7697,27.4621,48.58,26.9048,48.4825,27.0024,47.9253,26.4956,48.7697" style="stroke: #A80036; stroke-width: 0.1;"/><!--MD5=[2e10ad9fe24365b1d1745ec2e8a5a865]
link WM_DESTROY to *end--><path d="M24.8487,53.8192 C25.337,54.7329 25.8619,55.7936 26.2581,56.7953 C27.1229,58.9817 27.7961,61.6373 28.1593,63.2179 " fill="none" id="WM_DESTROY-&gt;*end" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="28.2705,63.7105,28.4627,62.7446,28.1605,63.2228,27.6823,62.9206,28.2705,63.7105" style="stroke: #A80036; stroke-width: 0.1;"/><!--MD5=[393748681b8e83416bbd3a46186dfa6c]
link WM_COMMAND to CM_COIN_BUTTON_PRESSED--><path d="M187.504,51.6136 C172.182,52.1807 133.534,53.8639 120.958,56.7953 C116.647,57.8003 112.042,59.6295 108.412,61.264 " fill="none" id="WM_COMMAND-&gt;CM_COIN_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="107.929,61.4829,108.9138,61.4744,108.3841,61.2759,108.5826,60.7462,107.929,61.4829" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="11.8" x="121.058" y="58.102">CHP_CheckCoins()</text><!--MD5=[d2b00eba07cda6749ff62e8d21a01add]
link CM_COIN_BUTTON_PRESSED to Windowprocedure--><path d="M102.307,61.4769 C102.494,60.032 102.554,58.3047 102.158,56.7953 C100.788,51.575 97.3521,46.2661 95.0623,43.1281 " fill="none" id="CM_COIN_BUTTON_PRESSED-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="94.7611,42.7187,94.9723,43.6807,95.0574,43.1215,95.6166,43.2066,94.7611,42.7187" style="stroke: #A80036; stroke-width: 0.1;"/><!--MD5=[a25c9094d86aa612bab1decadf61bbcc]
link WM_COMMAND to CM_DRINK_BUTTON_PRESSED--><path d="M187.493,51.7414 C178.302,52.2347 160.78,53.1517 145.858,53.7953 C141.265,53.9934 67.2006,54.6055 63.1581,56.7953 C61.2005,57.8558 59.7826,59.9518 58.8773,61.7042 " fill="none" id="WM_COMMAND-&gt;CM_DRINK_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="58.6355,62.1883,59.3955,61.5619,58.8589,61.741,58.6798,61.2044,58.6355,62.1883" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="63.2581" y="58.102">CHP_CheckIfEnough()</text><!--MD5=[03e0623e0b0b1f2fbf115a0253077c07]
link CM_DRINK_BUTTON_PRESSED to UserDrinkSelection--><path d="M56.6493,67.2238 C56.1458,68.8014 55.7748,70.8765 56.4581,72.5953 C56.8389,73.553 57.479,74.439 58.1793,75.2048 " fill="none" id="CM_DRINK_BUTTON_PRESSED-&gt;UserDrinkSelection" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="58.5271,75.5709,58.1971,74.643,58.1827,75.2085,57.6172,75.1941,58.5271,75.5709" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="22.2" x="56.5581" y="72.202">If you could pay it / WTSB_Redraw()</text><!--MD5=[0416babe433228265700962224c5e7cd]
link UserDrinkSelection to Dispense_Drink--><path d="M69.1816,79.3021 C72.594,79.763 76.6711,80.2664 80.3581,80.5953 C154.931,87.2485 245.732,89.8889 271.278,90.531 " fill="none" id="UserDrinkSelection-&gt;Dispense_Drink" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="271.796,90.544,270.9066,90.121,271.2962,90.5311,270.886,90.9207,271.796,90.544" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="27.5" x="140.258" y="84.902">Deposites left over money in change buffer</text><!--MD5=[5d454264d86af940c17d7d4c48964e54]
link Dispense_Drink to Windowprocedure--><path d="M284.708,90.3925 C304.086,89.3976 360.458,85.8458 360.458,78.1953 C360.458,51.1953 360.458,51.1953 360.458,51.1953 C360.458,44.5176 144.855,41.0457 100.701,40.4047 " fill="none" id="Dispense_Drink-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="100.1894,40.3973,101.0836,40.8101,100.6893,40.4045,101.095,40.0102,100.1894,40.3973" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="360.558" y="65.152">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[540ac7ce821b50f81f5376fa4bbc6752]
link CM_DRINK_BUTTON_PRESSED to Windowprocedure--><path d="M58.2136,62.1759 C59.1597,58.6377 61.4366,52.1133 65.9581,48.7953 C71.5926,44.6606 79.3033,42.4944 85.0252,41.3868 " fill="none" id="CM_DRINK_BUTTON_PRESSED-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="85.5377,41.2894,84.5788,41.0646,85.0465,41.3828,84.7283,41.8505,85.5377,41.2894" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="12.7" x="66.0581" y="51.752">If you couldn't pay it</text><!--MD5=[3d64d410bba2eaba769c416cbf3f2b70]
link WM_COMMAND to CM_CHANGE_BUTTON_PRESSED--><path d="M187.484,51.599 C173.134,52.1115 139.227,53.6446 135.158,56.7953 C133.663,57.9529 132.965,59.9773 132.64,61.6735 " fill="none" id="WM_COMMAND-&gt;CM_CHANGE_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="132.551,62.1881,133.0993,61.37,132.6367,61.6955,132.3111,61.2329,132.551,62.1881" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="14.7" x="135.258" y="58.102">CHP_ChangeHandeling</text><!--MD5=[7657591e8ae1590f2bc158b10d37e56e]
link CM_CHANGE_BUTTON_PRESSED to Windowprocedure--><path d="M129.481,62.1916 C127.504,60.5862 124.789,58.4701 122.258,56.7953 C114.111,51.4049 104.091,46.0298 98.1024,42.9412 " fill="none" id="CM_CHANGE_BUTTON_PRESSED-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="97.6427,42.7045,98.2598,43.4721,98.0873,42.9334,98.626,42.7608,97.6427,42.7045" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="117.658" y="51.752">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[a9c6c7f208f70d41025b11584a9c3bf2]
link WM_COMMAND to CM_DEBITCARD_BUTTON_PRESSED--><path d="M200.233,51.437 C214.98,51.6073 251.04,52.4676 262.258,56.7953 C265.107,57.8943 267.815,60.0704 269.709,61.8456 " fill="none" id="WM_COMMAND-&gt;CM_DEBITCARD_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="270.077,62.1948,269.6998,61.285,269.7144,61.8505,269.1489,61.8651,270.077,62.1948" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="18.1" x="265.458" y="58.102">PWDC_DebitcardHandeling()</text><!--MD5=[0c56e3912ec96814b3af0cf1d957f77c]
link CM_DEBITCARD_BUTTON_PRESSED to Enter_debitcard--><path d="M271.53,67.2119 C271.119,68.8847 270.923,71.0749 272.058,72.5953 C273.437,74.4429 278.744,75.8838 283.275,76.8108 " fill="none" id="CM_DEBITCARD_BUTTON_PRESSED-&gt;Enter_debitcard" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="283.766,76.9101,282.9625,76.3405,283.2758,76.8115,282.8048,77.1248,283.766,76.9101" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="13.7" x="272.158" y="72.202">First time enters card</text><!--MD5=[0c56e3912ec96814b3af0cf1d957f77c]
link CM_DEBITCARD_BUTTON_PRESSED to Enter_debitcard--><path d="M280.306,67.1966 C282.442,68.1104 284.635,69.3226 286.358,70.8953 C287.618,72.0451 288.56,73.6991 289.202,75.1215 " fill="none" id="CM_DEBITCARD_BUTTON_PRESSED-&gt;Enter_debitcard-1" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="289.408,75.5939,289.4149,74.6091,289.2081,75.1356,288.6816,74.9289,289.408,75.5939" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="15.2" x="287.958" y="72.202">Second time takes card</text><!--MD5=[7710365ef1517d2e2c42d799b66522c0]
link Enter_debitcard to Windowprocedure--><path d="M296.719,77.0881 C310.766,74.8733 341.977,68.497 331.058,56.7953 C323.011,48.172 140.96,41.8389 100.694,40.5407 " fill="none" id="Enter_debitcard-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="100.1696,40.5238,101.0566,40.9519,100.6694,40.5395,101.0817,40.1523,100.1696,40.5238" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="332.558" y="58.102">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[c108a44932b4a9056a8c76685e83bbc6]
link WM_COMMAND to CM_PIN_BUTTON_PRESSED--><path d="M187.484,51.7475 C176.208,52.4361 153.706,54.1304 151.358,56.7953 C149.831,58.5286 151.51,60.4088 153.651,61.8888 " fill="none" id="WM_COMMAND-&gt;CM_PIN_BUTTON_PRESSED" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="154.085,62.1794,153.5603,61.3459,153.6697,61.9009,153.1147,62.0104,154.085,62.1794" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="151.458" y="58.102">PWDC_AddPincodeBuffer()</text><!--MD5=[e9734c3841956494bd8f1a3bf25492ff]
link CM_PIN_BUTTON_PRESSED to Store_In_Buffer--><path d="M150.029,67.1994 C148.836,67.468 147.622,67.7108 146.458,67.8953 C126.968,70.9858 121.17,65.6051 102.158,70.8953 C98.7106,71.8546 95.1258,73.7296 92.4741,75.3119 " fill="none" id="CM_PIN_BUTTON_PRESSED-&gt;Store_In_Buffer" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="92.0235,75.5834,93.0008,75.4616,92.4518,75.3254,92.588,74.7764,92.0235,75.5834" style="stroke: #A80036; stroke-width: 0.1;"/><!--MD5=[cb746be6f751df5da082158bef504a3f]
link Store_In_Buffer to Windowprocedure--><path d="M82.1326,77.0507 C78.7949,76.5672 74.6086,75.9975 70.8581,75.5953 C53.7048,73.7558 48.7518,77.314 32.1581,72.5953 C-10.8127,60.3757 1.4551,63.5509 4.8581,56.7953 C7.5454,51.4605 10.1977,51.2172 15.6581,48.7953 C27.949,43.3438 67.9425,41.2275 85.0164,40.5584 " fill="none" id="Store_In_Buffer-&gt;Windowprocedure" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="85.5397,40.5381,84.6248,40.1734,85.0401,40.5575,84.6559,40.9728,85.5397,40.5381" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="4.9581" y="58.102">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[cb746be6f751df5da082158bef504a3f]
link Store_In_Buffer to Windowprocedure--><path d="M82.1415,77.1608 C74.0217,76.0392 60.2636,74.0218 55.3581,72.5953 C50.2531,71.1108 48.4514,71.2879 44.3581,67.8953 C34.0877,59.383 35.19,60.8353 38.0581,56.7953 C43.5379,49.0763 71.2212,43.7068 85.0183,41.4657 " fill="none" id="Store_In_Buffer-&gt;Windowprocedure-1" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="85.5436,41.3808,84.5913,41.1294,85.05,41.4605,84.7189,41.9192,85.5436,41.3808" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="38.1581" y="58.102">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[cb746be6f751df5da082158bef504a3f]
link Store_In_Buffer to Windowprocedure--><path d="M86.4093,75.5941 C83.4788,71.6797 78.5076,63.6696 80.7581,56.7953 C82.5582,51.2965 86.9659,46.1156 89.9343,43.0739 " fill="none" id="Store_In_Buffer-&gt;Windowprocedure-2" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="90.2889,42.7137,89.3725,43.0747,89.9382,43.0701,89.9428,43.6358,90.2889,42.7137" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="80.8581" y="58.102">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[0589d69c9fb082447a8af7a6cf9cf96d]
link WM_COMMAND to CM_PIN_BUTTON_PRESSED_OK--><path d="M187.489,51.9426 C181.14,52.6357 172.029,54.0815 169.858,56.7953 C168.024,59.0881 169.946,60.7864 172.944,62.0022 " fill="none" id="WM_COMMAND-&gt;CM_PIN_BUTTON_PRESSED_OK" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="173.434,62.1932,172.7405,61.4939,172.9681,62.0118,172.4502,62.2393,173.434,62.1932" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="19.5" x="169.958" y="58.102">PWDC_RemovePincodeBuffer()</text><!--MD5=[8a22965d86931cec4e75aefe0c02affd]
link CM_PIN_BUTTON_PRESSED_OK to Store_In_Buffer--><path d="M174.928,67.2006 C173.6,67.469 172.25,67.7114 170.958,67.8953 C149.05,71.0141 143.182,67.8859 121.258,70.8953 C112.104,72.1519 101.706,74.5651 95.0932,76.2266 " fill="none" id="CM_PIN_BUTTON_PRESSED_OK-&gt;Store_In_Buffer" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="94.5842,76.3549,95.5546,76.5229,95.0691,76.2328,95.3592,75.7472,94.5842,76.3549" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="56.4" x="121.358" y="72.202">Check storebuffer against database or in this case pSim-&gt;POINTOFCONCEPTPASSWORD</text><!--MD5=[a8a03847daf8dc3ae42f27a414570248]
link WM_COMMAND to CM_PIN_BUTTON_PRESSED_DEL--><path d="M193.049,53.8177 C192.713,55.3027 192.594,57.1672 193.558,58.4953 C194.543,59.852 197.522,61.0652 200.822,62.0455 " fill="none" id="WM_COMMAND-&gt;CM_PIN_BUTTON_PRESSED_DEL" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="201.311,62.1884,200.5607,61.5504,200.8314,62.0471,200.3346,62.3177,201.311,62.1884" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="14.4" x="193.658" y="58.102">PWDC_CheckPincode()</text><!--MD5=[2e9d213e15e2d09d04d9a1a800355c03]
link CM_PIN_BUTTON_PRESSED_DEL to Store_In_Buffer--><path d="M203.598,67.1998 C196.771,68.9934 186.98,71.3417 178.258,72.5953 C147.419,77.0278 110.122,77.8317 95.104,77.9703 " fill="none" id="CM_PIN_BUTTON_PRESSED_DEL-&gt;Store_In_Buffer" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="94.5792,77.975,95.4827,78.367,95.0792,77.9706,95.4756,77.5671,94.5792,77.975" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="22.3" x="187.858" y="72.202">Remove one digit form store buffer</text><!--MD5=[2d2dac9fa1b4c055c0f274d6e28e10b0]
link WM_COMMAND to CM_MENU_ITEM_ADMIN--><path d="M200.213,51.5606 C209.959,51.9295 228.008,53.1043 233.158,56.7953 C234.775,57.9543 235.76,59.9786 236.335,61.6745 " fill="none" id="WM_COMMAND-&gt;CM_MENU_ITEM_ADMIN" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="236.501,62.189,236.6057,61.2097,236.3477,61.7131,235.8443,61.4551,236.501,62.189" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="234.958" y="58.102">Grant admin right and gain debug money</text><!--MD5=[bb25d6ed9e70287a2d73e5490d40f753]
link CM_MENU_ITEM_ADMIN to WM_COMMAND--><path d="M228.832,62.1881 C227.932,61.9449 227.027,61.7092 226.158,61.4953 C219.81,59.9335 217.906,60.7177 211.758,58.4953 C210.244,57.9478 210.028,57.4523 208.558,56.7953 C206.045,55.6723 203.22,54.593 200.723,53.6983 " fill="none" id="CM_MENU_ITEM_ADMIN-&gt;WM_COMMAND" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="200.229,53.5219,200.9434,54.1999,200.7002,53.6891,201.211,53.4459,200.229,53.5219" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="211.858" y="58.102">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[6ab05012e162414f039dd4f921027586]
link WM_COMMAND to CM_MENU_ITEM_AUTHOR--><path d="M200.21,51.5069 C218.053,51.8629 268.376,53.1686 284.458,56.7953 C287.091,57.3891 293.222,59.9454 297.873,61.972 " fill="none" id="WM_COMMAND-&gt;CM_MENU_ITEM_AUTHOR" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="298.346,62.1788,297.6811,61.4522,297.8877,61.9788,297.3611,62.1854,298.346,62.1788" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="18.8" x="289.258" y="58.102">Displaying system infomation</text><!--MD5=[b00a13effb7e05a200a2861808418353]
link CM_MENU_ITEM_AUTHOR to WM_COMMAND--><path d="M307.042,62.1871 C308.876,60.5599 310.509,58.4202 308.958,56.7953 C305.21,52.8668 225.006,51.7176 200.748,51.4592 " fill="none" id="CM_MENU_ITEM_AUTHOR-&gt;WM_COMMAND" style="stroke: #A80036; stroke-width: 0.1;"/><polygon fill="#A80036" points="200.22,51.4537,201.1154,51.864,200.72,51.4594,201.1245,51.064,200.22,51.4537" style="stroke: #A80036; stroke-width: 0.1;"/><text fill="#000000" font-family="sans-serif" font-size="1.3" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="309.758" y="58.102">WTDB_Debug()/ WTDB_Display()</text><!--MD5=[fdaece11191e8ac572722141fdf96415]
@startuml


title Windowprocedure Cola Vending Machine 5 GUI Edition

scale 0.1

[*] - -> Initialised : Wm_CREATE, WM_PAINT, WM_CTLCOLORSTATIC / INIT_Button(), INIT_Static, INIT_Menu, INIT_Edit

Initialised : sim_t simulation
Initialised : ~*pSim = &simulation
Initialised : pSim->moneyInWallet = (rand() % 5000 + 500)
Initialised : pSim->moneyInAccount = (rand() % 100000)	
Initialised : pSim->changeInMachine = change				
Initialised : pSim->moneyInMachine = 0					
Initialised : pSim->isDebitCardEntered = 0					
Initialised : pSim->postionInCardCode = 0					
Initialised : pSim->hasPaid = 0                   
Initialised : pSim->debitCardCode[4] = {0, 0, 0, 0}        
Initialised : pSim->POINTOFCONCEPTPASSWORD[4] = {1, 3, 3, 7}         
Initialised - -> Windowprocedure

Windowprocedure - -> WM_COMMAND
Windowprocedure - -> WM_DESTROY

WM_DESTROY - -> [*]

WM_COMMAND - -> CM_COIN_BUTTON_PRESSED : CHP_CheckCoins()
CM_COIN_BUTTON_PRESSED : pSim->moneyInMachine = appropriate value
CM_COIN_BUTTON_PRESSED : pSim->moneyInMachine = appropriate value
CM_COIN_BUTTON_PRESSED - -> Windowprocedure

WM_COMMAND - -> CM_DRINK_BUTTON_PRESSED : CHP_CheckIfEnough()
CM_DRINK_BUTTON_PRESSED - -> UserDrinkSelection : If you could pay it / WTSB_Redraw()
UserDrinkSelection - -> Dispense_Drink : Deposites left over money in change buffer
Dispense_Drink - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

CM_DRINK_BUTTON_PRESSED - -> Windowprocedure : If you couldn't pay it 

WM_COMMAND - -> CM_CHANGE_BUTTON_PRESSED : CHP_ChangeHandeling
CM_CHANGE_BUTTON_PRESSED - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_DEBITCARD_BUTTON_PRESSED : PWDC_DebitcardHandeling()
CM_DEBITCARD_BUTTON_PRESSED - -> Enter_debitcard : First time enters card
CM_DEBITCARD_BUTTON_PRESSED - -> Enter_debitcard : Second time takes card
Enter_debitcard - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_PIN_BUTTON_PRESSED : PWDC_AddPincodeBuffer()
CM_PIN_BUTTON_PRESSED - -> Store_In_Buffer
Store_In_Buffer - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_PIN_BUTTON_PRESSED_OK : PWDC_RemovePincodeBuffer()
CM_PIN_BUTTON_PRESSED_OK - -> Store_In_Buffer : Check storebuffer against database or in this case pSim->POINTOFCONCEPTPASSWORD
Store_In_Buffer - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_PIN_BUTTON_PRESSED_DEL : PWDC_CheckPincode()
CM_PIN_BUTTON_PRESSED_DEL - -> Store_In_Buffer : Remove one digit form store buffer
Store_In_Buffer - -> Windowprocedure : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_MENU_ITEM_ADMIN : Grant admin right and gain debug money
CM_MENU_ITEM_ADMIN - -> WM_COMMAND : WTDB_Debug()/ WTDB_Display()

WM_COMMAND - -> CM_MENU_ITEM_AUTHOR : Displaying system infomation
CM_MENU_ITEM_AUTHOR - -> WM_COMMAND : WTDB_Debug()/ WTDB_Display()

note right of Initialised #lime
    initializing sim_t a struct that contents much of the system infomation,
    and wil be accessed using pSim.
end note

note top of WM_COMMAND #lime
    Because windows api use a lot of WM_COMMAND
    I have simplified it to the base Commands.
end note
@enduml

PlantUML version 1.2020.01beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>